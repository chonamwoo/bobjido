# BobMap 프로젝트 - MVP 개발 로드맵

## 📱 현재 개발 포커스 (2025-01-22 업데이트)
**모바일 웹 버전 개발 중**
- 시뮬레이터 URL: http://localhost:5555/mobile-simulator.html
- 모바일 레이아웃만 수정 (데스크톱 버전 유지)
- 768px 이하에서 자동으로 모바일 레이아웃 적용
- MobileLayout.tsx와 관련 컴포넌트만 수정
- useIsMobile() hook으로 모바일 감지

## 🎯 프로젝트 비전 (2025-01-20 업데이트)

### 단계별 개발 전략
1. **Phase 1 (MVP)**: 음식계의 SoundCloud - 맛집 플레이리스트 공유 플랫폼
2. **Phase 2**: 스포티파이처럼 추천 시스템 (맛집 & 취향 비슷한 사람)
3. **Phase 3**: 틴더/친구찾기 - 동행 매칭 시스템

### 🚀 현재 MVP 핵심 기능 (Phase 1)
1. **맛집 플레이리스트 공유** - 맛잘알들의 큐레이션 리스트
2. **찐맛집 필터링** - 진짜 맛집 찾는 꿀팁 기반 필터
3. **음식 MBTI 게임** - 취향 데이터 수집 & 매칭 기초 데이터
4. **지역 기반 탐색** - 지역별 맛잘알 추천
5. **카테고리 카운트** - 사용자 취향 데이터 수집

### 🎮 찐맛집 필터 시스템
- 배달 없는 집
- 어르신도 리뷰 남기신 집
- 배달 오토바이도 줄서는 집
- 현지인 단골 많은 집
- 주차 어려운데도 붐비는 집

### 🎲 음식 MBTI 게임 예시
- 팥빙수 vs 망고빙수
- 붕어빵 머리 먼저 vs 꼬리 먼저
- 떡볶이 떡파 vs 어묵파
- 치킨 다리 vs 날개
- 평생 하나만: 짜장면 vs 짬뽕
- 평생 회 3종류만 선택한다면?

### ❌ 일시적으로 제거할 기능들 (Phase 2-3로 연기)
1. ~~취향 매칭 시스템~~
2. ~~동행 찾기~~
3. ~~취향 분석 리포트~~
4. ~~복잡한 온보딩~~

### 📌 포트 설정 (변경 금지):
- **백엔드**: 8888 (다른 앱이 5000 사용 중)
- **프론트엔드**: 3000
- **MongoDB**: MongoDB Atlas 클라우드

### ⚠️ OAuth 로그인 설정 (절대 수정 금지):
- **Google OAuth**: 완벽하게 작동 중 - 건드리지 말 것!
- **Kakao OAuth**: 완벽하게 작동 중 - 건드리지 말 것!
- **passport.js의 kakaoId**: String(profile.id)로 변환 필수
- **CLIENT_URL**: http://localhost:3000
- **SERVER_URL**: http://localhost:8888

### 🎨 디자인 시스템 (유지해야 할 것):
- 오렌지-레드 그라데이션 메인 컬러
- Tailwind CSS 기반 스타일링
- Framer Motion 애니메이션
- 모바일 반응형 디자인

## 🔒 개발 규칙 및 보안 가이드라인

### GitHub 업로드 전 확인 사항
1. **사용자 승인 필수**: GitHub에 업로드하기 전에 반드시 사용자에게 확인을 받습니다.
2. **문제 해결 검증**: 코드가 실제로 문제를 해결했는지 사용자가 직접 테스트하고 확인합니다.

### 보안 검토 체크리스트
- [ ] 모든 코드를 검토하여 보안 모범 사례 준수 확인
- [ ] 민감한 정보(API 키, 비밀번호, 토큰 등) 노출 여부 확인
- [ ] 악용 가능한 취약점 존재 여부 검토
- [ ] SQL Injection, XSS, CSRF 등 보안 취약점 점검
- [ ] 사용자 입력값 검증 로직 확인
- [ ] 인증/인가 로직의 안전성 확인

### 커밋 후 문서화
GitHub에 커밋한 후에는 다음 내용을 포함하여 상세히 설명합니다:
- 구현한 기능의 목적과 동작 원리
- 변경된 코드의 구조와 로직
- 사용된 기술과 패턴의 이유
- 향후 개선 가능한 부분
- 선임 엔지니어의 관점에서 코드 리뷰와 학습 포인트 제공

## 프로젝트 정보
- **GitHub Repository**: https://github.com/chonamwoo/BobMap
- **개발 시작일**: 2025-08-07
- **마지막 업데이트**: 2025-08-17
- **최신 Commit**: (준비 중) 취향 매칭 중심 서비스 완성

## 현재 상태 (2025-08-17) ✅
- **모든 핵심 기능 구현 완료**
- **PWA 설정 완료** (모바일 앱처럼 사용 가능)
- **가짜 데이터로 풍부한 콘텐츠 구성**
- **베타 테스트 준비 완료**

## 프로젝트 개요
BobMap은 음식 취향 기반 매칭 및 맛집 공유 소셜 플랫폼입니다.

### 주요 기능
1. **취향 기반 매칭**: 8가지 취향 타입 기반 사용자 매칭
2. **맛집 공유**: 사용자들이 맛집 정보를 등록하고 공유
3. **동적 취향 업데이트**: 사용자 활동 기반 자동 취향 프로필 업데이트
4. **실시간 채팅**: Socket.io 기반 실시간 채팅
5. **소셜 로그인**: Google, Kakao OAuth 지원

## 기술 스택
### Frontend
- React 18 + TypeScript
- Tailwind CSS
- Framer Motion
- Zustand (상태 관리)
- React Query (데이터 페칭)

### Backend  
- Node.js + Express
- MongoDB + Mongoose
- JWT 인증
- Socket.io
- Passport.js (OAuth)

## 개발 환경 설정
- **서버 포트**: 8888 (⚠️ 5000 포트는 다른 앱이 사용 중)
- **클라이언트 포트**: 3000
- **MongoDB**: MongoDB Atlas 클라우드 사용
- **Proxy 설정**: client/package.json에 `"proxy": "http://localhost:8888"`

## 완료된 작업 (2025-08-07)

### ✅ 네비게이션 및 UI 개선
1. 매칭 기능을 최우선으로 배치
2. 사이드바 단순화 - 빠른 액션만 표시
3. 상단 툴바 재구성 - 주요 기능과 개인 기능 분리
4. 하트 아이콘을 음식 관련 아이콘(BowlIcon, PlateIcon)으로 변경

### ✅ 취향 진단 시스템 구현
1. 8가지 현실적인 취향 진단 질문 구현
   - 매운맛 선호도, 예산, 모험심, 분위기 선호 등
2. 8가지 취향 타입 정의
   - 매콤한 모험가, 힙스터 탐험가, 편안함 추구자 등
3. 동적 취향 업데이트 시스템
   - 사용자 활동(맛집 등록, 리뷰 작성 등)에 따라 자동 업데이트
   - 재진단 불가, 자연스러운 활동으로만 변경

### ✅ 인증 시스템 수정
1. User 모델 스키마 수정 - tasteProfile 필드 구조화
2. 회원가입/로그인 API 오류 해결
3. 소셜 로그인 포트 설정 통일 (5000)
4. 온보딩 프로세스 구현

### ✅ 버그 수정
1. 포트 설정 일관성 문제 해결 (최종: 8888 포트 사용)
2. 취향 진단 저장 오류 수정
3. 로그아웃 버그 수정
4. TypeScript 타입 오류 해결

## 완료된 작업 (2025-08-17)

### ✅ 콘텐츠 및 페이지 구현
1. **홈페이지 개선**
   - "혼밥 해결"에서 "취향 매칭을 통한 맛집 발견"으로 메시지 변경
   - 3개 핵심 기능 강조 (취향 매칭, 동행 찾기, 맛집 지도)

2. **지역별 탐색 페이지** (`/explore/local`)
   - 5개 지역 (강남, 홍대, 이태원, 성수, 종로)
   - 23개 실제같은 맛집 데이터
   - 카테고리 필터, 가격대, 평점 표시

3. **실시간 인기 페이지** (`/trending`)
   - TOP 10 맛집 랭킹
   - 순위 변동 표시 (▲▼)
   - 트렌딩 이유 표시

4. **취향 분석 페이지** (`/taste-analysis`)
   - 개요, 카테고리, 지역, 트렌드 4개 탭
   - 데이터 시각화 및 AI 추천

### ✅ PWA 및 모바일 앱 설정
1. Service Worker 등록
2. manifest.json 최적화
3. 오프라인 캐싱 구현
4. 홈 화면 추가 기능

## 다음 작업 예정 (Phase 2)
- [ ] 실제 사용자 데이터 연동
- [ ] AI 기반 맛집 추천 알고리즘
- [ ] 실시간 채팅 기능 고도화
- [ ] 앱스토어 배포 (React Native or Capacitor)

## 프로젝트 실행 방법
```bash
# 서버 실행
npm run server

# 클라이언트 실행 (새 터미널)
cd client && npm start
```

## 환경 변수 설정
서버 포트: 8888
클라이언트 포트: 3000
API URL: http://localhost:8888

## 실행 방법
```bash
# 1. 백엔드 서버 실행 (8888 포트)
npm run server

# 2. 프론트엔드 실행 (3000 포트)
cd client
npm start

# 3. 모바일 테스트
# 빌드 후 PWA로 설치
npm run build
serve -s build
# 모바일에서 접속 → 홈 화면에 추가
```

## 📚 최근 커밋 상세 설명

### Commit: 32c3616 - 프로필 사진 및 소셜 로그인 설정 개선

#### 1. 프로필 아바타 시스템 개선
**변경 파일**: `client/src/utils/avatars.ts`

**문제점**: 
- Unsplash API를 사용한 프로필 이미지가 자주 깨지거나 로드되지 않음
- API 요청 제한으로 인한 이미지 접근 실패
- 네트워크 지연으로 인한 사용자 경험 저하

**해결 방법**:
```typescript
// 이전: Unsplash API 사용
const DEFAULT_AVATARS = [
  'https://images.unsplash.com/photo-...'
];

// 변경 후: UI Avatars 서비스 사용
export const getDefaultAvatar = (username: string, size: number = 150): string => {
  // 사용자명 해싱으로 일관된 색상 선택
  let hash = 0;
  for (let i = 0; i < username.length; i++) {
    const char = username.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
  }
  const colorIndex = Math.abs(hash) % AVATAR_COLORS.length;
  
  // 사용자명 첫 2글자로 아바타 생성
  const name = encodeURIComponent(username.substring(0, 2).toUpperCase());
  return `https://ui-avatars.com/api/?name=${name}&size=${size}&background=${backgroundColor}&color=fff`;
};
```

**기술적 개선점**:
- **성능**: 외부 이미지 대신 SVG 기반 아바타로 빠른 로딩
- **일관성**: 해시 알고리즘으로 같은 사용자는 항상 같은 색상
- **신뢰성**: UI Avatars는 안정적인 서비스로 다운타임 최소화
- **캐싱**: 브라우저 캐싱 친화적인 URL 구조

#### 2. 소셜 로그인 문서화
**생성 파일**: `SOCIAL_LOGIN_SETUP.md`

**목적**: 개발자와 운영자를 위한 OAuth 설정 가이드 제공

**주요 내용**:
- Google OAuth 2.0 설정 단계별 가이드
- Kakao 로그인 설정 방법
- Redirect URI 설정: `http://localhost:5000/api/auth/{provider}/callback`
- 트러블슈팅 가이드 포함

**보안 고려사항**:
- 민감한 Client Secret은 .env 파일에만 저장
- 프로덕션과 개발 환경 분리
- HTTPS 사용 권장사항 명시

### 🔐 보안 검토 결과

#### ✅ 안전한 부분
1. **환경 변수 관리**: 모든 API 키와 시크릿이 .env 파일에 안전하게 저장됨
2. **JWT 토큰**: HttpOnly 쿠키 사용 권장, XSS 공격 방지
3. **입력값 검증**: 사용자명 sanitization 적용

#### ⚠️ 개선 필요 사항
1. **CORS 설정**: 프로덕션에서는 특정 도메인만 허용하도록 변경 필요
2. **Rate Limiting**: 로그인 시도 제한 추가 권장
3. **HTTPS**: 프로덕션 환경에서는 반드시 HTTPS 사용

### 📖 학습 포인트

1. **해시 함수 활용**: 사용자명을 숫자로 변환하여 일관된 색상 선택
   - Bit shift 연산(`<<`)으로 효율적인 해싱
   - Modulo 연산으로 배열 인덱스 범위 제한

2. **URL 인코딩**: `encodeURIComponent()`로 특수문자 처리
   - 한글, 이모지 등 다양한 문자 지원

3. **서비스 의존성 관리**: 
   - 외부 서비스 장애에 대비한 폴백 전략
   - 자체 호스팅 vs 외부 서비스 트레이드오프

---
*이 문서는 Claude AI가 자동으로 업데이트합니다.*
*보안 검토와 사용자 승인 후에만 GitHub에 업로드됩니다.*